<mxfile host="app.diagrams.net" modified="2020-12-22T13:52:57.773Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36" etag="aaUHN2qpBQ9u_O2Rqthb" version="14.1.1" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="2121" dy="1703" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="1Uik45kLceN-WnxneO16-1" value="&lt;font style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;日内处理/EOD处理-调账处理&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="510" y="-210" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.96;exitY=0.7;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-3" target="1Uik45kLceN-WnxneO16-4">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="365" />
              <mxPoint x="574" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-7" value="FIX消息&lt;br&gt;type=correction/cancel" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="1Uik45kLceN-WnxneO16-6">
          <mxGeometry x="-0.1686" y="-2" relative="1" as="geometry">
            <mxPoint x="1.8000000000000007" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-3" value="FIX" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="250" y="-60" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.4;entryY=0.1;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-4" target="1Uik45kLceN-WnxneO16-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="544" y="-100" />
              <mxPoint x="298" y="-100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-4" value="WEBULL" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="544" y="-120" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="490" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-10" value="开始" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="280" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-13" target="1Uik45kLceN-WnxneO16-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-13" target="1Uik45kLceN-WnxneO16-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-13" value="type类型" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="450" y="400" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-14" target="1Uik45kLceN-WnxneO16-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-14" value="correction&lt;br&gt;修改" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="270" y="410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-16" target="1Uik45kLceN-WnxneO16-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-16" value="cancel&lt;br&gt;取消" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="590" y="410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-18" target="1Uik45kLceN-WnxneO16-23">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="500" y="580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-18" value="新建execution&lt;br&gt;一条correction数据" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="270" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-22" value="&lt;div&gt;execution{&lt;/div&gt;&lt;div&gt;type:“&lt;b&gt;&amp;nbsp;trade_break_correction&lt;/b&gt;”&lt;/div&gt;&lt;div&gt;reason_code:&quot;&lt;b&gt;trade_break_correction&lt;/b&gt;&quot;,&lt;/div&gt;&lt;div&gt;original_exec_id:&quot;撤销的execId&quot;,&lt;/div&gt;&lt;div&gt;symbol:&quot;同修改前的记录&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;side:&quot;同修改前的记录一致&quot;&lt;/b&gt;,&lt;/div&gt;&lt;div&gt;status:&quot;normal&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;&quot;exec_time&quot;：&quot;修改前的记录的时间处理&quot;,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&quot;biz_offset&quot;:&quot;&lt;/b&gt;old_execution.biz_offset+1&lt;b&gt;&quot;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;修改修改的数量、价格、属性等&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;....&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;之前的数据old_execution不做改变&lt;/div&gt;" style="shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="10" y="490" width="250" height="240" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-23" target="1Uik45kLceN-WnxneO16-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-23" value="调用交易引擎-&lt;br&gt;进行资产变更" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-29" target="1Uik45kLceN-WnxneO16-23">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="500" y="580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-29" value="新增execution&lt;br&gt;cancel数据" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="590" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-31" value="&lt;div&gt;execution{&lt;/div&gt;&lt;div&gt;type:“&lt;b&gt;&amp;nbsp;trade_break_cancel&lt;/b&gt;”&lt;/div&gt;&lt;div&gt;reason_code:&quot;&lt;b&gt;trade_break_cancel&lt;/b&gt;&quot;,&lt;/div&gt;&lt;div&gt;original_exec_id:&quot;撤销的execId&quot;,&lt;/div&gt;&lt;div&gt;symbol:&quot;同修改前的记录&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;side:&quot;同修改前的记录相反&quot;&lt;/b&gt;,&lt;/div&gt;&lt;div&gt;status:&quot;normal&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;&quot;exec_time&quot;：&quot;修改前的记录的时间处理&quot;,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&quot;biz_offset&quot;:&quot;&lt;/b&gt;old_execution.biz_offset+1&lt;b&gt;&quot;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;其它相关属性不变化&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;....&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;之前的数据状态修改为&lt;b&gt;cancel&lt;/b&gt;&lt;/div&gt;" style="shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="730" y="450" width="250" height="240" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-33" target="1Uik45kLceN-WnxneO16-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-33" target="1Uik45kLceN-WnxneO16-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-33" value="记录exec_id --&lt;br&gt;盘后订单重排" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-35" value="结束" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="910" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-37" value="存储DB" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="640" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-39" value="&lt;div&gt;需要重排数据&lt;/div&gt;&lt;div&gt;t_replay_exec{&lt;/div&gt;&lt;div&gt;&lt;span&gt;	&lt;/span&gt;id:&quot;主键&quot;&lt;/div&gt;&lt;div&gt;&lt;span&gt;	&lt;/span&gt;execId:&quot;执行订单id，如果存在重复的，程序去重处理&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; status:&quot;是否已经执行过&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; create_time:&quot;创建时间&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; update_time:&quot;更新时间&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;type:&quot;类型 1 fix日内 2 fix Eod&quot;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="790" y="745" width="320" height="150" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-40" value="&lt;font style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;日内处理/EOD处理-execution重排处理&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="335" y="990" width="330" height="10" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-41" target="1Uik45kLceN-WnxneO16-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-41" value="开始" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="450" y="1040" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-42" value="结束" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="515" y="1520" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-43" target="1Uik45kLceN-WnxneO16-45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-43" value="定时任务启动，&lt;br&gt;检测是否存在&lt;br&gt;&lt;span style=&quot;text-align: left&quot;&gt;重排数据需要处理&lt;/span&gt;" style="whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="1140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-49" value="不存在" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-45" target="1Uik45kLceN-WnxneO16-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-52" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-45" target="1Uik45kLceN-WnxneO16-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-45" value="是否存在重排&lt;br&gt;数据需要执行" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="450" y="1240" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-47" value="&lt;b&gt;在送清算之前，进行重排处理。&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="180" y="1100" width="180" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-48" target="1Uik45kLceN-WnxneO16-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-48" value="发送通知告知&lt;br&gt;相关人员" style="whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="505" y="1420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-51" target="1Uik45kLceN-WnxneO16-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-51" value="按着execOrderId取出execution 按着bizoffset排序" style="whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="260" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-53" target="1Uik45kLceN-WnxneO16-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-53" value="进行数据的重放&lt;br&gt;exection_log、&lt;br&gt;execution &lt;br&gt;相关重放数据.&lt;br&gt;删掉之前的execution&amp;nbsp;" style="whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="251.88" y="1360" width="136.25" height="70" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-57" value="&lt;span style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;清算商调账&lt;/b&gt;&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="345" y="1650" width="330" height="10" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-59" target="1Uik45kLceN-WnxneO16-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-59" value="开始" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="450" y="1680" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-60" value="结束" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="450" y="2530" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-61" target="1Uik45kLceN-WnxneO16-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-66" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-61" target="1Uik45kLceN-WnxneO16-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-61" target="1Uik45kLceN-WnxneO16-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-61" value="type" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="450" y="1770" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-72" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-63" target="1Uik45kLceN-WnxneO16-71">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-63" value="Trade Cancel&lt;br&gt;取消execution" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="650" y="1765" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-70" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-65" target="1Uik45kLceN-WnxneO16-69">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-65" value="Trade Correction&lt;br&gt;修改记录&lt;br&gt;成交价格不对" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="130" y="1765" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-67" target="1Uik45kLceN-WnxneO16-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-67" value="Trade Cancel rebuild&lt;br&gt;取消订单-重新下单" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="1880" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-69" target="1Uik45kLceN-WnxneO16-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-69" value="新增一条&lt;br&gt;修改之后&lt;br&gt;execution" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-60" y="1765" width="120" height="65" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-71" target="1Uik45kLceN-WnxneO16-77">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="930" y="1825" />
              <mxPoint x="930" y="2230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-71" value="新增一条相反方向&lt;br&gt;execution" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="860" y="1765" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-73" target="1Uik45kLceN-WnxneO16-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-73" value="新增两条记录&lt;br&gt;与原纪录一样，方向相反(一条cancel)&lt;br&gt;修改的成交数量(一条new create项目)" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="375" y="2020" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-75" value="&lt;div&gt;execution{&lt;/div&gt;&lt;div&gt;type:“trade_cancel”&lt;/div&gt;&lt;div&gt;reason_code:&quot;&lt;b&gt;trade_break_cancel_execution&lt;/b&gt;&quot;,&lt;/div&gt;&lt;div&gt;original_exec_id:&quot;撤销的execId&quot;,&lt;/div&gt;&lt;div&gt;symbol:&quot;同修改前的记录&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;side:&quot;同修改前的记录相反&quot;&lt;/b&gt;,&lt;/div&gt;&lt;div&gt;status:&quot;normal&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;&quot;exec_time&quot;：&quot;修改前的记录的时间处理&quot;,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&quot;biz_offset&quot;:&quot;&lt;/b&gt;old_execution.biz_offset+1&lt;b&gt;&quot;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;其它相关属性不变化&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;....&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;old_execution 状态修改为&amp;nbsp;&lt;b&gt;cancel&lt;/b&gt;&lt;/div&gt;" style="shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1010" y="1690" width="290" height="250" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-76" value="&lt;div&gt;execution{&lt;/div&gt;&lt;div&gt;type:“trade_correction”&lt;/div&gt;&lt;div&gt;reason_code:&quot;&lt;b&gt;trade_break_trade_correction&lt;/b&gt;&quot;,&lt;/div&gt;&lt;div&gt;original_exec_id:&quot;原始记录的execId&quot;,&lt;/div&gt;&lt;div&gt;symbol:&quot;同修改前的记录&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;side:&quot;同修改前的记录一致&quot;&lt;/b&gt;,&lt;/div&gt;&lt;div&gt;status:&quot;normal&quot;,&lt;/div&gt;&lt;div&gt;&quot;成交价格&quot;:&quot;修改后的&quot;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&quot;exec_time&quot;：&quot;修改前的记录的时间处理&quot;,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&quot;biz_offset&quot;:&quot;&lt;/b&gt;old_execution.biz_offset+1&lt;b&gt;&quot;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;其它相关属性不变化&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;....&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;old_execution 状态修改为&lt;b&gt;break&lt;/b&gt;&lt;/div&gt;" style="shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-400" y="1690" width="300" height="230" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-84" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-77" target="1Uik45kLceN-WnxneO16-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-77" value="调用交易引擎-&lt;br&gt;进行资产变更" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-81" value="&lt;div&gt;取消记录&lt;/div&gt;&lt;div&gt;execution{&lt;/div&gt;&lt;div&gt;type:“rebuild_cancel”&lt;/div&gt;&lt;div&gt;reason_code:&quot;&lt;b&gt;Trade break，trade cancel rebuild, cancel execution&lt;/b&gt;&quot;,&lt;/div&gt;&lt;div&gt;original_exec_id:&quot;old_execId&quot;,&lt;/div&gt;&lt;div&gt;symbol:&quot;同old&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;side:&quot;同修改前的记录相反&quot;&lt;/b&gt;,&lt;/div&gt;&lt;div&gt;status:&quot;normal&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;&quot;exec_time&quot;：&quot;修改前的记录的时间处理&quot;,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&quot;biz_offset&quot;:&quot;&lt;/b&gt;old_execution.biz_offset+1&lt;b&gt;&quot;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;其它相关属性不变化&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;....&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;old_execution 状态修改为&amp;nbsp;&lt;b&gt;break&lt;/b&gt;&lt;/div&gt;" style="shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="630" y="1890" width="280" height="240" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-82" value="&lt;div&gt;新增记录&lt;/div&gt;&lt;div&gt;execution{&lt;/div&gt;&lt;div&gt;type:“rebuild_rebuild”&lt;/div&gt;&lt;div&gt;reason_code:&quot;&lt;b&gt;Trade break，trade cancel rebuild, rebuild execution&lt;/b&gt;&quot;,&lt;/div&gt;&lt;div&gt;original_exec_id:&quot;old_execId&quot;,&lt;/div&gt;&lt;div&gt;symbol:&quot;同修改前的记录&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;side:&quot;同old&quot;&lt;/b&gt;,&lt;/div&gt;&lt;div&gt;status:&quot;normal&quot;,&lt;/div&gt;&lt;div&gt;&lt;b&gt;&quot;exec_time&quot;：&quot;修改前的记录的时间处理&quot;,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&quot;biz_offset&quot;:&quot;&lt;/b&gt;old_execution.biz_offset+2&lt;b&gt;&quot;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;其它相关属性不变化&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;....&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;old_execution 状态修改 &lt;b&gt;break&lt;/b&gt;&lt;/div&gt;" style="shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="65" y="1900" width="295" height="240" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="1Uik45kLceN-WnxneO16-83" target="1Uik45kLceN-WnxneO16-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1Uik45kLceN-WnxneO16-83" value="记录execu_id" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="2340" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
